---
title: リモートに変更がある場合、Capistrano 2 を使ったデプロイを中断する
description: Capistrano 2 をリモートに変更がある場合、デプロイを中断する様に設定しました。
date: 2014-05-11 19:00
public: true
tags: capistrano, git, deployment
alternate: true
---

Capistrano 2 でデプロイを行う際、コミットされていない変更がリモートにあった場合、デグレードを引き起こすので、それを防ぐために、タスクを中断する様に設定しました。

\# もちろん、リモートの資材をいじるのは良くないことですが、**たまに**やらなきゃいけないときがあるので保険としての作ったものです。

READMORE

<%= partial 'partials/2014-05-11-abort-capistrano-git-dirty/git-dirty.rb.html.md' %>

もし、リモートに変更があった場合は、以下の様な実行結果になります:

<%= partial 'partials/2014-05-11-abort-capistrano-git-dirty/cap.log.html.md' %>

## Capistano 3

Capistrano 3 は releases ディレクトリに `git clone` を行わないので、このタスクはそのまま移植できません。

現在、別のアプローチで、リモートの変更を自動デプロイから守る方法を模索中です。
